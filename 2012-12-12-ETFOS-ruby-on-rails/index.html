<!DOCTYPE html>
<html lang="hr">

  <head>
    <meta charset="utf-8">

    <title>Ruby (on Rails)</title>

    <meta name="description" content="Ruby (on Rails) - Jesen weba i dizajna - ETF Osijek">
    <meta name="author" content="Vlado Cingel">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/ruby.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <section>
          <h1>Ruby (on Rails)</h1>
          <h3>Jesen weba i dizajna</h3>
          <small>
            Elektrotehnički fakultet Osijek<br/>
            12/12/12
          </small>
          <p style="margin-top:40px">
            <small>
              Vlado Cingel<br>
              <a href="mailto:vlado@cingel.hr">vlado@cingel.hr</a>
            </small>
          </p>
        </section>

        <section>
          <h1>Cingel <span style="text-transform:none">d.o.o.</span></h1>
          <p>Čačinci</p>
          <p class="fragment">?</p>
        </section>

        <section>
          <img src="images/cingel.jpg" style="margin:0" />
        </section>

        <section>
          <h2>Freelancer</h2>
          <p>A person who sells services to employers without a long-term commitment to any of them</p>
        </section>

        <section>
          <section>
            <img src="images/portfolio/botkier.png">
          </section>
          <section>
            <img src="images/portfolio/padbase.png">
          </section>
          <section>
            <img src="images/portfolio/ean.png">
          </section>
          <section>
            <img src="images/portfolio/pl.png">
          </section>
        </section>

        <section>
          <h3>Ali to nije tema naše današnje emisije...</h3>
        </section>

        <section>
          <ul class="spacious">
            <li>Ruby <small>A programmer's best friend</small></li>
            <li class="fragment">Rack <small>Minimal interface between webservers supporting Ruby and Ruby frameworks</small></li>
            <li class="fragment">Rails <small>Web development that doesn't hurt</small></li>
          </li>
        </section>

        <section>
          <h1>Ruby</h1>
          <img src="images/Ruby_logo.png" height="400px" />
        </section>

        <section>
          <h2>Yukihiro Matsumoto</h2>
          <h3>“matz”</h3>
          <img src="images/matz.jpg" />
          <p>1995</p>
        </section>

        <section>
          <blockquote>
            I wanted to design my own language to maximize my freedom
          </blockquote>
          <blockquote>
            I wanted to design a language in which I could love programming
          </blockquote>
          <p class="sub_quote">Matz</p>
        </section>

        <section>
          <h1>Sve je objekt</h1>
          <p><a href="http://objectgraph.rubyforge.org/dotOG.html">http://objectgraph.rubyforge.org/dotOG.html</a></p>
          <blockquote cite="http://www.linuxdevcenter.com/pub/a/linux/2001/11/29/ruby.html">
            I wanted a scripting language that was more powerful than Perl, and more object-oriented than Python
          </blockquote>
          <pre class="fragment"><code contenteditable>
5.times { print "Ruby" }
          </code></pre>
          <aside class="notes">
            In many languages, numbers and other primitive types are not objects. Ruby follows the influence of the Smalltalk language by giving methods and instance variables to all of its types. This eases one’s use of Ruby, since rules applying to objects apply to all of Ruby.
          </aside>
        </section>

        <section>
          <h2>Ruby</h2>
          <ul>
            <li>Hello World!</li>
            <li>Specifičnosti</li>
            <li>RubyGems</li>
          </ul>
        </section>

        <section>
          <h2>Rack</h2>
          <img src="images/Rack-logo.png">
        </section>

        <section>
          <h2>Rack</h2>
          <p>Minimal interface between webservers supporting Ruby and Ruby frameworks</p>
        </section>

        <section>
          <img src="images/rails_logo.png">
        </section>

        <section>
          <h3>David Heinemeier Hansson</h3>
          <p>"dhh"</p>
          <img src="images/dhh.jpg" height="75%">
          <p>2003</p>
        </section>

        <section>
          <h2>Rails</h2>
          <p>Ruby on Rails is an open-source web framework that's optimized for programmer happiness and sustainable productivity.
            It lets you write beautiful code by favoring convention over configuration</p>
        </section>

        <section>
          <h2>Rails</h2>
          <ul class="spacious">
            <li>puno posla sa malo koda</li>
            <li class="fragment">čini razvoj zabavnim</li>
            <li class="fragment">"tvrdoglav" framework</li>
          </ul>
        </section>

        <section>
          <img src="images/rails.jpg">
        </section>
        <section>
          <img src="images/rails_broken.jpeg">
        </section>

        <section>
          <h2>Rails Way</h2>
          <ul class="spacious">
            <li>DRY <small>Don't Repeat Yourself</small></li>
            <li class="fragment">Convention over configuration</li>
            <li class="fragment">REST <small>Representational State Transfer</small></li>
          </ul>
        </section>

        <section>
          <h2>MVC <small>arhitektura</small></h2>
          <p>Model, View, Controller</p>
        </section>

        <section>
          <h2>Model</h2>
          <ul class="spacious">
            <li>prezentira podatke s kojima radite</li>
            <li>primarno baza podataka (ali ne isključivo)</li>
            <li>jedan model prezentira jednu tablicu u bazi</li>
            <li>sav "business logic" nalazi se u modelima"</li>
          </ul>
        </section>

        <section>
          <h2>View</h2>
          <ul class="spacious">
            <li>user interface (sučelje)</li>
            <li>ERB templates najčešće</li>
            <li>HTML, XML, JSON, JavaScript, ...</li>
          </ul>
        </section>

        <section>
          <h2>Controller</h2>
          <ul class="spacious">
            <li>povezuje Model i View</li>
            <li>web request -> dohvaća podatke -> prosljeđuje ih</li>
          </ul>
        </section>

        <section>
          <h2>Komponente</h2>
          <ul>
            <li>ActionPack
              <ul>
                <li>ActionController<br><small>procesuira requestove, izvlači parametre i šalje ih akcijama koje ih trebaju, session management, render templejtova, redirekcije</small></li>
                <li>ActionView<br><small>odogovoran je za ispis, generira html, xml, json, ...</small></li>
                <li>ActionDispatch<br><small>odgovoran je za ruting web requestova i dispačiranje do aplikacije ili nekog drugog middlewarea</small></li>
              </ul>
            </li>
            <li>ActionMailer<br><small>zadušen za generiranje i slanje mailova</small></li>
            <li>ActiveRecord<br><small>ORM adapter, database independent, CRUD funkcionalnost, napredni finderi, relacije između modela</small></li>
            <li>ActiveResource<br><small>definiranje modela iz RESTful web servisa</small></li>
            <li>ActiveSupport<br><small>skupina korisnih utility metoda i core extensiona</small></li>
            <li>Railties<br><small>core Rails code odogovran za dizanje aplikacije, povezuje ostale dijelove zajedno</small></li>
          </ul>
        </section>

        <section>
          <h2>Rails</h2>
          <p>primjer</p>
        </section>

        <section>
          <h2 class="notransform">ActiveRecord - Validations</h2>
          <p>Zadaća validacije</p>
          <pre class="fragment"><code contenteditable>
class Person < ActiveRecord::Base
end
          </code></pre>
          <pre class="fragment"><code contenteditable>
p = Person.new(:name => "Vlado Cingel")
p.persisted? # false
p.save # true
p.persisted? # true
          </code></pre>
        </section>

        <section>
          <h2 class="notransform">ActiveRecord - Validations</h2>
          <p>Kada se događa validacija?</p>
          <ul class="fragment">
            <li>create</li>
            <li>create!</li>
            <li>save</li>
            <li>save!</li>
            <li>update</li>
            <li>update_attributes</li>
            <li>update_attributes!</li>
          </ul>
        </section>

        <section>
          <h2 class="notransform">ActiveRecord - Validations</h2>
          <p>valid? / invalid?</p>
          <pre class="fragment"><code contenteditable>
class Person < ActiveRecord::Base
  validates :name, :presence => true
end
          </code></pre>
          <pre class="fragment"><code contenteditable>
Person.create(:name => "Vlado Cingel").valid? # => true
Person.create(:name => nil).valid? # => false
          </code></pre>
          <pre class="fragment"><code contenteditable>
Person.create(:name => "Vlado Cingel").invalid? # => false
Person.create(:name => nil).invalid? # => true
          </code></pre>
        </section>

        <section>
          <h2 class="notransform">ActiveRecord - Validations</h2>
          <p>Errors</p>
          <pre><code contenteditable>
class Person < ActiveRecord::Base
  validates :name, :presence => true
end
          </code></pre>
          <pre class="fragment"><code contenteditable>
p = Person.new
p.errors # {}
          </code></pre>
          <pre class="fragment"><code contenteditable>
p = Person.create
p.errors # {:name=>["can't be blank"]}
p.errors[:name] # ["can't be blank"]
          </code></pre>
        </section>

        <section>
          <h2 class="notransform">ActiveRecord - Validations</h2>
          <p>Helpers</p>
          <p><a href="http://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html" target="_blank">ActiveModel::Validations::HelperMethods</a></p>
          <p class="fragment">+ Custom validations</p>
        </section>

        <section>
          <h2 class="notransform">ActiveRecord - Callbacks</h2>
          <p>Definiranje</p>
          <pre><code contenteditable>
class User < ActiveRecord::Base
  validates :login, :email, :presence => true

  before_create do |user|
    user.name = user.login.capitalize if user.name.blank?
  end
end
          </code></pre>
          <p>false ili exception otkazuju akciju i aktiviraju rollback</p>
        </section>


        <section>
          <h2 class="notransform">ActiveRecord - Callbacks</h2>
          <p>Novi objekt</p>
          <ul>
            <li>before_validation</li>
            <li>after_validation</li>
            <li>before_save</li>
            <li>around_save</li>
            <li>before_create</li>
            <li>around_create</li>
            <li>after_create</li>
            <li>after_save</li>
          </ul>
        </section>

        <section>
          <h2 class="notransform">ActiveRecord - Callbacks</h2>
          <p>Postojeći objekt</p>
          <ul>
            <li>before_validation</li>
            <li>after_validation</li>
            <li>before_save</li>
            <li>around_save</li>
            <li>before_update</li>
            <li>around_update</li>
            <li>after_update</li>
            <li>after_save</li>
          </ul>
        </section>

        <section>
          <h2 class="notransform">ActiveRecord - Callbacks</h2>
          <p>Brisanje objekta</p>
          <ul>
            <li>before_destroy</li>
            <li>around_destroy</li>
            <li>after_destroy</li>
          </ul>
        </section>

        <section>
          <h2 class="notransform">ActiveRecord - Callbacks</h2>
          <p>Ostali</p>
          <ul>
            <li>after_initialize</li>
            <li>after_find</li>
            <li>after_commit</li>
            <li>after_rollback</li>
          </ul>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Associations</h3>
          <p>Asociacija je veza između dva Active Record modela</p>
          <p class="fragment">Tipovi asocijacija</p>
          <ul class="fragment">
            <li>belongs_to</li>
            <li>has_one</li>
            <li>has_many</li>
            <li>has_many :through</li>
            <li>has_one :through</li>
            <li>has_and_belongs_to_many</li>
          </ul>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Associations</h3>
          <p>belongs_to</p>
          <img src="images/ar/belongs_to.png">
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Associations</h3>
          <p>has_one</p>
          <img src="images/ar/has_one.png">
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Associations</h3>
          <p>has_many</p>
          <img src="images/ar/has_many.png">
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Associations</h3>
          <p>has_many :through</p>
          <img src="images/ar/has_many_through.png">
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Associations</h3>
          <p>has_one :through</p>
          <img src="images/ar/has_one_through.png">
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Associations</h3>
          <p>has_and_belongs_to_many</p>
          <img src="images/ar/has_and_belongs_to_many.png">
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Associations</h3>
          <p>Polymorphic Associations</p>
          <p class="fragment">Model može pripadati (belongs_to) više nego jednom modelu</p>
          <img src="images/ar/polymorphic.png" class="fragment">
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Dohvat iz baze</p>
          <p class="fragment">Finder methods</p>
          <ul class="fragment">
            <li>where</li>
            <li>select</li>
            <li>group</li>
            <li>order</li>
            <li>reorder</li>
            <li>reverse_order</li>
            <li>limit</li>
            <li>offset</li>
            <li>joins</li>
            <li>includes</li>
            <li>lock</li>
            <li>readonly</li>
            <li>from</li>
            <li>having</li>
          </ul>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Dohvat pojedinog objekta</p>
          <pre><code contenteditable>
Client.find(10)
# => SELECT * FROM clients WHERE (clients.id = 10) LIMIT 1
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Dohvat pojedinog objekta</p>
          <pre><code contenteditable>
Client.first
# => SELECT * FROM clients LIMIT 1
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Dohvat pojedinog objekta</p>
          <pre><code contenteditable>
Client.last
# => SELECT * FROM clients ORDER BY clients.id DESC LIMIT 1
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Dohvat više objekata od jednom</p>
          <pre><code contenteditable>
Client.find(1, 10)
# => SELECT * FROM clients WHERE (clients.id IN (1,10))
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Uvjeti - String</p>
          <pre><code contenteditable>
Client.where("orders_count = 2")
# => SELECT * FROM clients WHERE (orders_count = 2)
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Uvjeti - Array</p>
          <pre><code contenteditable>
Client.where("orders_count = ? AND locked = ?", 2, false)
# => SELECT * FROM clients WHERE (orders_count = 2 AND locked = 'f')
          </code></pre>
          <pre><code contenteditable>
Client.where("orders_count = :count AND locked = :locked", {:count => 2, :locked => false})
# => SELECT * FROM clients WHERE (orders_count = 2 AND locked = 'f')
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Uvjeti - Hash</p>
          <pre><code contenteditable>
Client.where(:orders_count => 2)
# => SELECT * FROM clients WHERE (orders_count = 2)
          </code></pre>
          <pre><code contenteditable>
Client.where(:orders_count => 2, :locked => false)
# => SELECT * FROM clients WHERE (orders_count = 2 AND locked = 'f')
          </code></pre>
          <pre><code contenteditable>
Client.where(:orders_count => 2).where(:locked => false)
# => SELECT * FROM clients WHERE (orders_count = 2 AND locked = 'f')
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Uvjeti - Hash</p>
          <pre><code contenteditable>
Client.where(:created_at => (Time.now.midnight - 1.day)..Time.now.midnight)
# => SELECT * FROM clients WHERE (clients.created_at BETWEEN '2012-12-11 00:00:00' AND '2012-12-12 00:00:00')
          </code></pre>
          <pre><code contenteditable>
Client.where(:orders_count => [1,3,5])
# => SELECT * FROM clients WHERE (clients.orders_count IN (1,3,5))
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Order</p>
          <pre><code contenteditable>
Client.order("created_at")
# => SELECT * FROM clients ORDER BY created_at
          </code></pre>
          <pre><code contenteditable>
Client.order("orders_count ASC, created_at DESC")
# => SELECT * FROM clients ORDER BY orders_count ASC, created_at DESC
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Select</p>
          <pre><code contenteditable>
Client.select("viewable_by, locked")
# => SELECT viewable_by, locked FROM clients
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Limit, Offset</p>
          <pre><code contenteditable>
Client.limit(5)
# => SELECT * FROM clients LIMIT 5
          </code></pre>
          <pre><code contenteditable>
Client.limit(5).offset(30)
# => SELECT * FROM clients LIMIT 5 OFFSET 30
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Joins</p>
          <pre><code contenteditable>
Client.joins('LEFT OUTER JOIN addresses ON addresses.client_id = clients.id')
# => SELECT clients.* FROM clients LEFT OUTER JOIN addresses ON addresses.client_id = clients.id
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Joins</p>
          <pre><code contenteditable>
class Category < ActiveRecord::Base
  has_many :posts
end

class Post < ActiveRecord::Base
  belongs_to :category
  has_many :comments
  has_many :tags
end

class Comment < ActiveRecord::Base
  belongs_to :post
  has_one :guest
end

class Guest < ActiveRecord::Base
  belongs_to :comment
end

class Tag < ActiveRecord::Base
  belongs_to :post
end
          </code></pre>
          <pre><code contenteditable>
Category.joins(:posts)
# => SELECT categories.* FROM categories
  INNER JOIN posts ON posts.category_id = categories.id
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Joins - multiple associations</p>
          <pre><code contenteditable>
Post.joins(:category, :comments)
# => SELECT posts.* FROM posts
  INNER JOIN categories ON posts.category_id = categories.id
  INNER JOIN comments ON comments.post_id = posts.id
          </code></pre>
          <p>Joins - nested associations</p>
          <pre><code contenteditable>
Post.joins(:comments => :guest)
# => SELECT posts.* FROM posts
  INNER JOIN comments ON comments.post_id = posts.id
  INNER JOIN guests ON guests.comment_id = comments.id
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Joins - Conditions</p>
          <pre><code contenteditable>
time_range = (Time.now.midnight - 1.day)..Time.now.midnight
Client.joins(:orders).where('orders.created_at' => time_range)
Client.joins(:orders).where(:orders => {:created_at => time_range})
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Scopes</p>
          <pre><code contenteditable>
class Post < ActiveRecord::Base
  scope :published, where(:published => true)
end
          </code></pre>
          <pre><code contenteditable>
Post.published
# => SELECT * FROM posts WHERE (published = 't')
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Scopes</p>
          <pre><code contenteditable>
class Post < ActiveRecord::Base
  scope :before, lambda { |t| where("created_at < ?", t) }
end
          </code></pre>
          <pre><code contenteditable>
Post.before(Time.zone.now)
          </code></pre>
        </section>

        <section>
          <h3 class="notransform">ActiveRecord - Query interface</h3>
          <p>Dynamic finders</p>
          <ul>
            <li>find_by_*</li>
            <li>find_first_by_*</li>
            <li>find_last_by_*</li>
            <li>find_all_by_*</li>
          </ul>
        </section>

        <section>
          <h2>Getting started</h2>
          <ul class="spacious">
            <li>http://guides.rubyonrails.org/</li>
            <li>http://railscasts.com</li>
          </ul>
        </section>

        <section>
          <h1>HVALA :)</h1>
          <p>vlado@cingel.hr</p>
        </section>

      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
          // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>

  </body>
</html>
